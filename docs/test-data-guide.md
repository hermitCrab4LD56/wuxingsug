# 测试数据使用指南

本文档介绍如何使用项目中的测试数据来验证基础用户功能。

## 📋 概述

项目提供了完整的测试数据集，包括：
- 4个测试用户账号（2个免费用户，2个VIP用户）
- 对应的八字数据
- 每日建议记录
- 用户反馈数据

## 🚀 快速开始

### 1. 插入测试数据

```bash
# 清理现有数据并插入新的测试数据
npm run seed

# 仅插入测试数据（不清理现有数据）
npm run seed:no-clear
```

### 2. 测试账号信息

| 用户名 | 手机号 | 密码 | 用户类型 | 性别 | 出生日期 | 出生时间 |
|--------|--------|------|----------|------|----------|----------|
| 张三 | 13800138000 | 123456 | 免费用户 | 男 | 1990-05-15 | 08:30:00 |
| 李四 | 13900139000 | 123456 | VIP用户 | 女 | 1985-10-20 | 14:20:00 |
| 王五 | 13700137000 | 123456 | 免费用户 | 男 | 1992-08-08 | 10:15:00 |
| 赵六 | 13600136000 | 123456 | VIP用户 | 女 | 1988-12-25 | 16:45:00 |

## 🧪 功能测试指南

### 1. 用户注册与登录测试

**测试步骤：**
1. 打开应用登录页面
2. 使用上述任一测试账号登录
3. 验证登录成功后的页面跳转
4. 检查用户信息显示是否正确

**预期结果：**
- 登录成功，获得JWT token
- 用户信息正确显示
- 根据用户类型显示相应功能

### 2. 八字信息查看测试

**测试步骤：**
1. 登录后进入个人中心或八字页面
2. 查看八字四柱信息
3. 查看五行分析结果
4. 查看个性化分析文本

**预期结果：**
- 显示完整的年月日时四柱
- 五行分析数据正确
- 个性化建议文本清晰易懂

**示例数据：**
- 张三：庚午年、辛巳月、甲子日、戊辰时
- 李四：乙丑年、戊戌月、丁酉日、壬申时

### 3. 每日建议功能测试

**测试步骤：**
1. 进入每日建议页面
2. 查看当日穿衣颜色建议
3. 查看忌讳颜色
4. 查看出行方向建议
5. 查看幸运时间段
6. 查看详细建议文本

**预期结果：**
- 建议内容与用户八字相匹配
- 颜色建议清晰明确
- 时间和方向信息准确

**示例建议：**
- 张三：宜穿绿色、青色，忌红色，东方出行
- 李四：宜穿红色、橙色，忌黑色，南方出行

### 4. 反馈系统测试

**测试步骤：**
1. 在建议页面提交反馈
2. 选择评分（1-5星）
3. 填写评价文字
4. 提交反馈
5. 查看反馈历史

**预期结果：**
- 反馈提交成功
- 评分和文字正确保存
- 反馈列表正确显示

### 5. VIP功能测试

**使用VIP账号测试：**
- 李四（13900139000）
- 赵六（13600136000）

**测试内容：**
- 高级建议功能
- 详细分析报告
- 专属功能访问权限

## 📊 数据结构说明

### 用户表 (users)
- `id`: UUID主键
- `phone`: 手机号（登录用户名）
- `password_hash`: 加密密码
- `name`: 用户姓名
- `gender`: 性别
- `birth_date`: 出生日期
- `birth_time`: 出生时间
- `plan`: 用户类型（free/vip）

### 八字表 (user_bazi)
- `user_id`: 关联用户ID
- `year_pillar`: 年柱
- `month_pillar`: 月柱
- `day_pillar`: 日柱
- `hour_pillar`: 时柱
- `wuxing_analysis`: 五行分析（JSON格式）
- `analysis_text`: 分析文本

### 每日建议表 (daily_advice)
- `user_id`: 关联用户ID
- `advice_date`: 建议日期
- `clothing_colors`: 推荐颜色（JSON数组）
- `avoid_colors`: 忌讳颜色（JSON数组）
- `travel_direction`: 出行方向
- `lucky_times`: 幸运时间（JSON数组）
- `suggestions`: 详细建议

### 反馈表 (advice_feedback)
- `user_id`: 关联用户ID
- `advice_id`: 关联建议ID
- `rating`: 评分（1-5）
- `comment`: 评价文字

## 🔧 故障排除

### 常见问题

**1. 种子数据插入失败**
```bash
# 检查数据库连接
npm run check

# 查看详细错误信息
tsx api/scripts/run-seed.ts
```

**2. 登录失败**
- 确认手机号格式正确
- 确认密码为 `123456`
- 检查网络连接

**3. 数据显示异常**
- 确认种子数据已正确插入
- 检查API接口是否正常
- 查看浏览器控制台错误信息

### 重置测试数据

```bash
# 清理并重新插入所有测试数据
npm run seed
```

## 📝 测试检查清单

- [ ] 用户注册功能
- [ ] 用户登录功能
- [ ] 个人信息显示
- [ ] 八字信息查看
- [ ] 每日建议获取
- [ ] 颜色建议显示
- [ ] 出行方向建议
- [ ] 幸运时间显示
- [ ] 反馈提交功能
- [ ] 反馈历史查看
- [ ] VIP功能访问
- [ ] 免费用户限制

## 🎯 下一步

完成基础功能测试后，可以：
1. 测试边界情况和异常处理
2. 进行性能测试
3. 测试用户体验流程
4. 验证数据安全性

---

**注意：** 测试数据仅用于开发和测试环境，请勿在生产环境中使用。